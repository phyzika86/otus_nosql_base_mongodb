# otus_nosql_base_mongodb
# Отчет по выполнению кода

## Описание кода
Данный скрипт подключается к MongoDB, генерирует тестовые данные с использованием библиотеки Faker, выполняет запросы к базе данных и сравнивает производительность запросов с индексами и без них. Также в коде приведены примеры запросов на выборку и обновление данных.

---

## Основные шаги выполнения

1. **Подключение к MongoDB**
   - Функция `connect_to_mongo` выполняет подключение к MongoDB с повторными попытками в случае ошибок.
   - Используются параметры подключения: `mongodb://root:example@mongo:27017/`.

2. **Генерация тестовых данных**
   - Создается база данных `myDatabase` и коллекция `myColl`.
   - Для каждого из значений `[100, 1000, 10000]` генерируются тестовые данные:
     - Имя, email, адрес (улица, город, почтовый индекс).
     - Список заказов, где каждый заказ содержит название продукта и его цену.

3. **Вставка данных в коллекцию**
   - Данные вставляются в коллекцию с использованием метода `insert_many`.

4. **Запросы без индекса**
   - Выполняется запрос для поиска документов, где цена заказа меньше 50.
   - Замеряется время выполнения запроса без индекса.
   - Результаты запроса сохраняются в файл `without_index_{i}.txt`.

5. **Создание индекса**
   - Создается индекс на поле `orders.price`.
   - Выполняется тот же запрос с индексом, замеряется время выполнения.
   - Результаты запроса сохраняются в файл `with_index_{i}.txt`.

6. **Примеры запросов**
   - **Выборка данных**: Поиск документов, где имя начинается на "John".
   - **Обновление данных**: Увеличение цены заказов меньше 50 на 10.
   - **Удаление поля**: Удаление поля `email` у пользователей с email, заканчивающимся на "@example.com".

7. **Удаление коллекции**
   - После выполнения всех операций коллекция удаляется с помощью метода `drop`.

8. **Обработка ошибок**
   - Все исключения обрабатываются, и ошибки выводятся в консоль.

---

## Результаты
- Для каждого объема данных (`100`, `1000`, `10000`) измеряется время выполнения запроса без индекса и с индексом.
- Результаты запросов сохраняются в текстовые файлы для последующего анализа.
- Выполняются примеры запросов на выборку и обновление данных.

---

## Вывод
Код демонстрирует:
- Подключение к MongoDB с обработкой ошибок.
- Генерацию и вставку тестовых данных.
- Сравнение производительности запросов с индексами и без них. Запросы с индексами работают быстрее, чем без индексов, но это все зависит от выборки данных (иногда выполнение с индексами может быть дольше, чем в случае полного сканирования всех документов)
- Примеры работы с данными (выборка, обновление, удаление полей).


# Инструкция по запуску

Для запуска проекта с использованием Docker Compose выполните следующие шаги:

---

## 1. Подготовка окружения

1. Убедитесь, что на вашем компьютере установлены:
   - [Docker](https://docs.docker.com/get-docker/)
   - [Docker Compose](https://docs.docker.com/compose/install/)

2. Склонируйте репозиторий с проектом (если требуется) и перейдите в директорию проекта:
   ```bash
   git clone <ваш-репозиторий>
   cd <директория-проекта>

3. Запустите в фоновом режиме docker-compose up -d. Результаты будут представлены в файлах `without_index_{i}.txt` и `with_index_{i}.txt`
